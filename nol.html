<html lang="ru" >
<head>
  <meta charset="UTF-8">
    <script class="u-script" type="text/javascript" src="общие.js" defer=""></script>
     <script class="u-script" type="text/javascript" src="nol.js" defer=""></script>
<meta charset="utf-8">
  <meta name="keywords" content="ТФТЛ,Dz6a,томский физико технический лицей, дз6a, дз, dz, 6а">
    <meta name="description" content="Это сайт Dz6a тфтл есть дз расписание и полезная информация. Тэги: тфтл,ТФТЛ,Dz6a, томский физико технический лицей">
    	    <meta name="viewport" content="width=device-width">
<meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Dz6a тфтл</title>

    <link rel="icon" href="images/favicon1.ico">


</head>

<body>
	<h2>Крестики Нолики для одного</h2>
	<div id="game">
		<div class="table">
			<table cellpadding="0" cellspacing="0">
				<tr>
					<td>
						<div class="inner"></div>
					</td>
					<td>
						<div class="inner"></div>
					</td>
					<td>
						<div class="inner"></div>
					</td>
				</tr>
				<tr>
					<td>
						<div class="inner"></div>
					</td>
					<td>
						<div class="inner"></div>
					</td>
					<td>
						<div class="inner"></div>
					</td>
				</tr>
				<tr>
					<td>
						<div class="inner"></div>
					</td>
					<td>
						<div class="inner"></div>
					</td>
					<td>
						<div class="inner"></div>
					</td>
				</tr>
			</table>
			<div class="winning"></div>
		</div>
		<div id="win_block">
			<span class="winner"></span>
			<span class="again">Играть еще!</span>
		</div>
	</div>
<style>
	h2 {
	text-align: center;
}
.inner {
	width: 50px;
	height: 50px;
	font-size: 20px;
	line-height: 50px;
	text-align: center;
	text-transform: uppercase;
	border: 1px solid #333;
	margin: 5px;
	cursor: pointer;

	box-shadow: 3px 4px 1px 2px rgba(1,1,1, 0.1);
	text-shadow: 2px 3px  1px rgba(1,1,1, 0.3);
	user-select: none;
}
table {
	/*margin: 0 auto;*/
}

#win_block {
	display: none;
	text-align: center;
	padding-top: 20px;
	font-size: 20px;
}
#win_block .again{
	font-weight: bold;
	cursor: pointer;
	color: #369;
	border-bottom: 1px solid #369;
}
#win_block .again:hover{
	border-color: transparent;
	
}


#game {
	position: relative;
}
#game .table{
	/*border: 1px solid red;*/
	display: table;
	
	margin: 0 auto;
	position: relative;
}
#game .table .winning{
	display: none;
	width: 100%;
	height: 100%;
	background: rgba(0,200,0, 0.5);

	position: absolute;
	top: 0;
	left: 0;
}

#game table tr:first-child div {
	margin-top: 0;
}
#game table tr:last-child div {
	margin-bottom: 0;
}
#game table tr td:first-child div {
	margin-left: 0;
}
#game table tr td:last-child div {
	margin-right: 0;
}
</style>
<script>
	// Math.floor(Math.random()*3)


var arr, arr_events = [], win_block, winner, again, winning, game;

var comp_sym = "o";
var user_sym = "x";

onload = function(){
	game = document.getElementById("game");
	arr = game.getElementsByClassName("inner");
	win_block = document.getElementById("win_block");
	win_text = win_block.getElementsByClassName("winner")[0];
	again = win_block.getElementsByClassName("again")[0];
	winning = game.getElementsByClassName("winning")[0];

	again.onclick = function(){
		winning.style.display = "none";
		win_block.style.display = "none";
		clearTable();
		randomMove();
	};

	for(var i = 0; i < arr.length; i++){
		arr[i].onclick = function(){
			drawSym(this);
		};

		/* тут хотел использовать addEven.. и потом убрать его, когда определился победитель */
	}
	randomMove();

};

function randomMove(){
	var rnd = getRandomInt(2);
	console.log(rnd);
	if (rnd == 1) {
		autoDrawing();
	}
	return true;
}

function drawSym(item, sym = user_sym){
	// console.log(item);
	if (item.hasChildNodes()) return false;
	item.innerHTML = sym;
	
	var winner = checkWinner();

	if (sym == user_sym && !winner)
		autoDrawing();


	if (winner == user_sym) {
		win_text.innerHTML = "Вы выиграли!";
		win_text.style.color = "green";
		winning.style.backgroundColor = "rgba(0,200,0, 0.5)";
	}else if (winner == comp_sym) {
		win_text.innerHTML = "Выиграл компьютер! Попоробуйте еще раз!";
		win_text.style.color = "red";
		winning.style.backgroundColor = "rgba(200,0,0, 0.5)";
	}
	if (winner) {
		winning.style.display = "block";
		win_block.style.display = "block";
	}
	return true;
}

function checkWinner(){
	var winner = "";
	var j = 0;


	var xy_1_1 = arr[0].innerHTML;
	var xy_1_2 = arr[4].innerHTML;
	var xy_1_3 = arr[8].innerHTML;

	var xy_2_1 = arr[2].innerHTML;
	var xy_2_2 = arr[4].innerHTML;
	var xy_2_3 = arr[6].innerHTML;

	if ((xy_1_1 && xy_1_2 && xy_1_3) || (xy_2_1 && xy_2_2 && xy_2_3)) {

		if (xy_1_1 == user_sym && xy_1_2 == user_sym && xy_1_3 == user_sym) {
			winner = user_sym;
		}
		else if(xy_1_1 == comp_sym && xy_1_2 == comp_sym && xy_1_3 == comp_sym){
			winner = comp_sym;
		}


		if (xy_2_1 == user_sym && xy_2_2 == user_sym && xy_2_3 == user_sym) {
			winner = user_sym;
		}
		else if(xy_2_1 == comp_sym && xy_2_2 == comp_sym && xy_2_3 == comp_sym){
			winner = comp_sym;
		}
	}




	if (!winner){
		for(var i = 0; i < 3; i++){

			// alert(i);

			var a1 = arr[i].innerHTML;
			var a2 = arr[i + 3].innerHTML;
			var a3 = arr[i + 6].innerHTML;

			var b1 = arr[i].innerHTML;
			var b2 = arr[i + 1].innerHTML;
			var b3 = arr[i + 2].innerHTML;
			

			// console.log("b1 = '" + (b1) + "' b2 = '" + (b2) + "' b3 = '" + (b3) +"'");

			if (a1 == user_sym && a2 == user_sym && a3 == user_sym) {
				winner = user_sym;
				break;
			}
			else if(a1 == comp_sym && a2 == comp_sym && a3 == comp_sym){
				winner = comp_sym;
				break;
			}


			if (i != 0) j = 3*i;

			b1 = arr[j].innerHTML;
			b2 = arr[j + 1].innerHTML;
			b3 = arr[j + 2].innerHTML;

			if (b1 == user_sym && b2 == user_sym && b3 == user_sym) {
				winner = user_sym;
				break;
			}
			else if(b1 == comp_sym && b2 == comp_sym && b3 == comp_sym){
				winner = comp_sym;
				break;
			}
			if (winner) 
				break;
		}
	}

	return winner;
}

function autoDrawing(){

	if (!ckeckFreeSpace()) {
		
		win_text.innerHTML = "Выиграла ничья! ";
		win_text.style.color = "blue";
		winning.style.display = "block";
		winning.style.backgroundColor = "rgba(0,0,200, 0.5)";
		win_block.style.display = "block";

		return false;
	}
	var el, rnd;

	do{
		rnd = getRandomInt(arr.length);
		el = arr[rnd];
		// console.log(rnd);
	}while(!drawSym(el, comp_sym));

	if (!ckeckFreeSpace()) {
		autoDrawing();
	}
}

function clearTable(){
	for(var i = 0; i < arr.length; i++){
		arr[i].innerHTML =  "";
	}
}

function ckeckFreeSpace(){
	var res = false;

	for(var i = 0; i < arr.length; i++){
		if (arr[i].hasChildNodes()){
			res = false;
		}else{
			res = true;
			break;
		}
	}

	return res;
}

function getRandomInt(max){
	return Math.floor(Math.random() * max);
}







function addHandler(el, ev, func ){
	try{
		el.addEventListener(ev, func, false);
	}
	catch(e){
		el.attachEvent("on"+ev, func);
	}
}


function removerEvent(el, ev, func){
	try{
		el.removeEventListener(ev, func, false);

	}catch(x){
		el.detachEvent("on"+ev, func);
		
	}
}
	</script>


					







	<center>
<h2>Крестики Нолики для двоих</h2>
<div id="wrapper">
<div class="block" id="b1"></div>
<div class="block" id="b2"></div>
<div class="block" id="b3"></div>
<div class="block" id="b4"></div>
<div class="block" id="b5"></div>
<div class="block" id="b6"></div>
<div class="block" id="b7"></div>
<div class="block" id="b8"></div>
<div class="block" id="b9"></div>
<div class="clr"></div>


<div id="result">Нет победителя</div>

<button id="reset">Обновить</button>
</center>
</div>

<style>
* {list-style-type: none; text-decoration: none; }
/*.clear */

#wrapper {width: 310px; margin: 15px auto; position: relative; }
.block {width: 100px; height: 100px; float: left; background: black; margin: 0 2px 2px 0;}
.active {opacity: 1; transition: 2s; }
#b1, #b9,#b8, #b7, #b6, #b5, #b4, #b3, #b2 {width: 100px; height: 100px; background:#d0aa9b ;
margin: 0 2px 2px 0; font-size: 90px; text-align: center; vertical-align: middle; }
#result { font-size: 0px; margin-top: 50px; font-weight: bold;}
.clr { clear: both; } </style>

	
	<SCRIPT language=JavaScript type=text/javascript>

isNS4 = (document.layers) ? true : false;
isIE4 = (document.all && !document.getElementById) ? true : false;
isIE5 = (document.all && document.getElementById) ? true : false;
isNS6 = (!document.all && document.getElementById) ? true : false;

var curX, curY, curX2, curY2, boxX, boxY, moving=0, touch=0, tmp, tmp2;
var gametime=0, started=0, speed=40, next=0;
var starttime, endtime, finaltime=0; 
var enemyxdir = new Array(1,1,1,1);
var enemyydir = new Array(1,1,1,1);
var x1, y1, x2, y2, x3, y3, x4, y4, gen;

if (isNS4 || isNS6){
document.captureEvents(Event.MOUSEUP|Event.MOUSEDOWN|Event.MOUSEMOVE);
}
document.onmousedown = start;
document.onmousemove = checkLocation;
document.onmouseup = stop;

function startclock() {var today = new Date(); starttime = today.getTime();}
function endclock() {var today = new Date(); endtime = today.getTime();}
function calctime() {var time = (endtime - starttime - 0)/1000;	return time;}

function giveposX(divname) {
	if (isNS4) var posLeft = document.layers[divname].left;
	else if (isIE4 || isIE5) var posLeft = document.all(divname).style.pixelLeft;
	else if (isNS6) var posLeft = parseInt(document.getElementById(divname).style.left + "");
	return posLeft;
}

function giveposY(divname) {
	if (isNS4) var posTop = document.layers[divname].top;
	else if (isIE4 || isIE5) var posTop = document.all(divname).style.pixelTop;
	else if (isNS6) var posTop = parseInt(document.getElementById(divname).style.top + "");
	return posTop;
}

function setposX(divname, xpos) {
	if (isNS4) document.layers[divname].left = xpos;
	else if (isIE4 || isIE5) document.all(divname).style.pixelLeft = xpos;
	else if (isNS6) document.getElementById(divname).style.left = xpos;
}

function setposY(divname, ypos) {
	if (isNS4) document.layers[divname].top = ypos;
	else if (isIE4 || isIE5) document.all(divname).style.pixelTop = ypos;
	else if (isNS6) document.getElementById(divname).style.top = ypos;
}

function givesize(divname, dimension) {
	var divsize = 0;
		if (dimension == 'y') {
			if (isNS4) divsize = document.layers[divname].clip.height;
			else if (isIE4 || isIE5) divsize = document.all(divname).style.pixelHeight;
			else if (isNS6) divsize = parseInt(document.getElementById(divname).style.height + "");
		}
		else if (dimension == 'x') {
			if (isNS4) divsize = document.layers[divname].clip.width;
			else if (isIE4 || isIE5) divsize = document.all(divname).style.pixelWidth;
			else if (isNS6) divsize = parseInt(document.getElementById(divname).style.width + "");
		}

	return divsize;
}

// check to see if 'box' is touching 'enemy1'
function checktouching(num) {

	var enemy = "enemy" + num + ""
	var difX = giveposX('box') - giveposX(enemy) - 0; // -0 converts to integer
	var difY = giveposY('box') - giveposY(enemy) - 0;

	// set touch = 1 if it is touching an enemy
	if (difX > (-1 * givesize('box', 'x')) && difX < givesize(enemy, 'x') && difY > (-1 * givesize('box', 'y')) && difY < givesize(enemy, 'y')) {
		touch = 1;
	}
	else touch = 0;

}

function movenemy(num,step_x,step_y){

	var enemy = "enemy" + num + ""
	var enemyx = givesize(enemy, 'x');
	var enemyy = givesize(enemy, 'y');

	if (giveposX(enemy) >= (450 - enemyx) || giveposX(enemy) <= 0) {
		enemyxdir[num] = -1 * enemyxdir[num];
		}
	if (giveposY(enemy) >= (450 - enemyy) || giveposY(enemy) <= 0) {
		enemyydir[num] = -1 * enemyydir[num];
		}

	var newposx = giveposX(enemy) + (step_x*enemyxdir[num]) + 0;
	var newposy = giveposY(enemy) + (step_y*enemyydir[num]) + 0;

	setposX(enemy, newposx);
	setposY(enemy, newposy);

	checktouching(num + "");
	if (touch == 1) {
		stop(); reset();
		}
}

function rand(number) {
        return Math.ceil(Math.random()*number);
};

function rt() {
	return rand(30) - 13;
}

function rx() {
	tmp = rt();

	while (Math.abs(tmp) < 3) {
		tmp = rt();
	}

	return tmp;
}


function movenemies() {

	gametime = gametime + 1

	next = next + 1;

	if ((next == 10)&(speed>1)) {
		speed = speed - 1;
		next = 0;
	}

	if (speed < 1)
		speed = 1;

	if (gen != 1) {
		x1 = rx();
		y1 = rx();
		x2 = rx();
		y2 = rx();
		x3 = rx();
		y3 = rx();
		x4 = rx();
		y4 = rx();

		gen = 1;
	}
//	window.status = "next: " + next + " speed:  " + speed + "   gametime: " + gametime;

	movenemy(0,x1,y1);
	movenemy(1,x2,y2);
	movenemy(2,x3,y3);
	movenemy(3,x4,y4);

	setTimeout(movenemies,speed);
}

function start(e) {

	if (started == 0) {	movenemies(); 	startclock(); 	started = 1;	}

	curX = (isNS4 || isNS6) ? e.pageX : window.event.x ;
    curY = (isNS4 || isNS6) ? e.pageY : window.event.y ;

	curX2 = eval(curX - 40);
	curY2 = eval(curY - 40);

	boxX = eval(curX - 20);
	boxY = eval(curY - 20);

	var boxleft = giveposX('box');
	var boxtop = giveposY('box');

	if (curX > boxleft && curX2 < boxleft && curY > boxtop && curY2 < boxtop) {

		moving = 1;
		setposX('box', boxX);
		setposY('box', boxY);

		if (isNS4 || isNS6){
		document.captureEvents(Event.MOUSEMOVE);
		}
	}
}

function stop(e){
    moving=0;
	if (isNS4 || isNS6){
	document.releaseEvents(Event.MOUSEMOVE);
	}
}

function reset(e){
    endclock();
	moving=0;
	if (isNS4 || isNS6){
		document.releaseEvents(Event.MOUSEMOVE);
		}
	if (finaltime == 0) {
		finaltime = calctime();
		window.alert(finaltime + "sec.");

	
			document.location.reload();
		}
}

function checkLocation(e){

		curX = (isNS4 || isNS6) ? e.pageX : window.event.x ;
        curY = (isNS4 || isNS6) ? e.pageY : window.event.y ;

		boxX = eval(curX - 20);
		boxY = eval(curY - 20);

	checktouching('1');

	if (moving == 1 && touch == 0){

			setposX('box',boxX);
			setposY('box',boxY);

			if (curY > 69 && curX > 69 && curY < 381 && curX < 381) return false;
			else stop(); reset();
	}

	else if (touch == 1){
	stop(); reset();
	}

}
</SCRIPT>
<a href="ugmk.php.html"><h2>Игра красный куб (только для пк)</h2>
</body>
</html>
